<div class="employee-list-container">
  <div class="list-header">
    <h2>{{ t['EMPLOYEE_LIST'] }}</h2>
    <a routerLink="/employees/add" class="btn btn-primary">
      <span class="icon">+</span> {{ t['ADD_EMPLOYEE'] }}
    </a>
  </div>

  @if (errorMessage()) {
    <div class="error-message">
      {{ errorMessage() }}
    </div>
  }

  <div class="search-container">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (ngModelChange)="onSearchChange()"
      [placeholder]="t['SEARCH_EMPLOYEE']"
      class="search-input"
      [disabled]="isLoading()"
    />
  </div>

  <div class="table-container">
    @if (!isLoading()) {
      <table class="employee-table">
        <thead>
        <tr>
          <th (click)="onSort('registrationNumber')" class="sortable">
            {{ t['REGISTRATION_NUMBER'] }} <span class="sort-icon">{{ getSortIcon('registrationNumber') }}</span>
          </th>
          <th (click)="onSort('firstName')" class="sortable">
            {{ t['NAME'] }} <span class="sort-icon">{{ getSortIcon('firstName') }}</span>
          </th>
          <th (click)="onSort('lastName')" class="sortable">
            {{ t['LAST_NAME'] }} <span class="sort-icon">{{ getSortIcon('lastName') }}</span>
          </th>
          <th (click)="onSort('gender')" class="sortable">
            {{ t['GENDER'] }} <span class="sort-icon">{{ getSortIcon('gender') }}</span>
          </th>
          <th class="actions-column">{{ t['ACTIONS'] }}</th>
        </tr>
        </thead>
        <tbody>
          @for (employee of filteredEmployees(); track employee.id) {
            <tr class="employee-row">
              <td>{{ employee.registrationNumber }}</td>
              <td>{{ employee.firstName }}</td>
              <td>{{ employee.lastName }}</td>
              <td>{{ genderLabels[employee.gender] }}</td>
              <td class="actions-cell">
                <a
                  [routerLink]="['/employees/edit', employee.id]"
                  class="btn btn-edit"
                  [title]="t['EDIT']"
                >
                  {{ t['EDIT'] }}
                </a>
                <button
                  (click)="onDelete(employee)"
                  class="btn btn-delete"
                  [title]="t['REMOVE']"
                >
                  {{ t['REMOVE'] }}
                </button>
              </td>
            </tr>
          }
          @if (filteredEmployees().length === 0) {
            <tr>
              <td colspan="5" class="no-results">
                {{ searchTerm ? t['SEARCH_NOT_FOUND'] : t['NO_EMPLOYEES'] }}
              </td>
            </tr>
          }
        </tbody>
      </table>
    }

    @if (isLoading()) {
      <div class="loading-message">
        Loading employees...
      </div>
    }
  </div>

  @if (filteredEmployees().length > 0) {
    <div class="results-count">
      {{ employeesResultText() }}
    </div>
  }
</div>
